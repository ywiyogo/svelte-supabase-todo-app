import{S as x,i as z,s as J,e as h,t as N,k as P,c as b,a as w,h as T,d as m,m as I,b as t,g as D,F as l,N as U,H as F,O as K,j as G,E as M,P as Q,G as W}from"./index-d933d993.js";import{s as R}from"./AuthStore-94daa87b.js";import{p as X,g as Z}from"./stores-0d309780.js";import{b as $}from"./singletons-1b661bce.js";function ee(o){let u,d,y,r,s,f,g,E,n,L,e,B,O,p,j,v,c,k,C,H;return{c(){u=h("h1"),d=N(o[0]),y=P(),r=h("form"),s=h("div"),f=h("label"),g=N("Email"),E=P(),n=h("input"),L=P(),e=h("label"),B=N("Password"),O=P(),p=h("input"),j=P(),v=h("div"),c=h("button"),k=N(o[0]),this.h()},l(a){u=b(a,"H1",{class:!0});var i=w(u);d=T(i,o[0]),i.forEach(m),y=I(a),r=b(a,"FORM",{class:!0});var A=w(r);s=b(A,"DIV",{class:!0});var _=w(s);f=b(_,"LABEL",{for:!0,class:!0});var S=w(f);g=T(S,"Email"),S.forEach(m),E=I(_),n=b(_,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),L=I(_),e=b(_,"LABEL",{for:!0,class:!0});var V=w(e);B=T(V,"Password"),V.forEach(m),O=I(_),p=b(_,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),_.forEach(m),j=I(A),v=b(A,"DIV",{class:!0});var Y=w(v);c=b(Y,"BUTTON",{type:!0,class:!0});var q=w(c);k=T(q,o[0]),q.forEach(m),Y.forEach(m),A.forEach(m),this.h()},h(){t(u,"class","font-bold text-center text-2xl text-gray-800"),t(f,"for","todo"),t(f,"class","font-bold text-gray-800"),t(n,"type","email"),t(n,"name","email"),t(n,"class","rounded-lg shadow-sm p-2 my-2 border border-gray-200"),t(n,"placeholder","Your email"),t(e,"for","passwd"),t(e,"class","font-bold text-gray-800"),t(p,"type","password"),t(p,"name","passwd"),t(p,"class","rounded-lg shadow-sm p-2 my-2 border border-gray-200"),t(p,"placeholder","Your password"),t(s,"class","flex flex-col mb-6"),t(c,"type","submit"),t(c,"class","rounded shadow-sm bg-teal-500 py-2 px-4 text-white"),c.disabled=o[3],t(v,"class","flex justify-end my-4"),t(r,"class","form my-6")},m(a,i){D(a,u,i),l(u,d),D(a,y,i),D(a,r,i),l(r,s),l(s,f),l(f,g),l(s,E),l(s,n),U(n,o[1]),l(s,L),l(s,e),l(e,B),l(s,O),l(s,p),U(p,o[2]),l(r,j),l(r,v),l(v,c),l(c,k),C||(H=[F(n,"input",o[5]),F(p,"input",o[6]),F(r,"submit",K(o[4]))],C=!0)},p(a,[i]){i&1&&G(d,a[0]),i&2&&n.value!==a[1]&&U(n,a[1]),i&4&&p.value!==a[2]&&U(p,a[2]),i&1&&G(k,a[0]),i&8&&(c.disabled=a[3])},i:M,o:M,d(a){a&&m(u),a&&m(y),a&&m(r),C=!1,Q(H)}}}function ae(o,u,d){let y;W(o,X,e=>d(7,y=e));let r="",s="",f=!1,{mode:g}=u;const E=async()=>{try{if(g=="Login"){d(3,f=!0),console.log(r);const{error:e}=await R.auth.signIn({email:r,password:s});if(e)throw e;alert("Check your email for the login link!")}else{const{error:e}=await R.auth.signUp({email:r,password:s});if(e)throw e;Z(y.url.origin+$),alert("Please check your email for a verification!")}}catch(e){console.error(e),alert(e.error_description||e.message)}finally{d(3,f=!1)}};function n(){r=this.value,d(1,r)}function L(){s=this.value,d(2,s)}return o.$$set=e=>{"mode"in e&&d(0,g=e.mode)},[g,r,s,f,E,n,L]}class oe extends x{constructor(u){super(),z(this,u,ae,ee,J,{mode:0})}}export{oe as A};
